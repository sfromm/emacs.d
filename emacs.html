<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Emacs configuration</title>
<!-- 2015-03-12 Thu 21:54 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Stephen Fromm" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Emacs configuration</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Emacs Configuration</a>
<ul>
<li><a href="#sec-1-1">1.1. About this file</a></li>
<li><a href="#sec-1-2">1.2. Personal information</a></li>
<li><a href="#sec-1-3">1.3. Emacs initialization</a>
<ul>
<li><a href="#sec-1-3-1">1.3.1. Add package sources</a></li>
<li><a href="#sec-1-3-2">1.3.2. Install packages if necessary</a></li>
<li><a href="#sec-1-3-3">1.3.3. Define lisp directories and Use use-package</a></li>
<li><a href="#sec-1-3-4">1.3.4. Funtions and other building blocks</a></li>
<li><a href="#sec-1-3-5">1.3.5. <span class="done DONE">DONE</span> Load encrypted secrets</a>
<ul>
<li><a href="#sec-1-3-5-1">1.3.5.1. CANCELLED Consider using <code>gpg-agent</code> and public key encryption</a></li>
<li><a href="#sec-1-3-5-2">1.3.5.2. CANCELLED Consider loading secrets file on demand</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-4">1.4. Org mode</a>
<ul>
<li><a href="#sec-1-4-1">1.4.1. Contacts</a></li>
<li><a href="#sec-1-4-2">1.4.2. Pomodoro</a></li>
<li><a href="#sec-1-4-3">1.4.3. Babel mode</a></li>
<li><a href="#sec-1-4-4">1.4.4. Exporting</a></li>
</ul>
</li>
<li><a href="#sec-1-5">1.5. Packages</a>
<ul>
<li><a href="#sec-1-5-1">1.5.1. Emacs vi emulation</a></li>
<li><a href="#sec-1-5-2">1.5.2. BBDB</a></li>
<li><a href="#sec-1-5-3">1.5.3. Bookmarks</a></li>
<li><a href="#sec-1-5-4">1.5.4. Diminish</a></li>
<li><a href="#sec-1-5-5">1.5.5. Ediff</a></li>
<li><a href="#sec-1-5-6">1.5.6. Elfeed</a></li>
<li><a href="#sec-1-5-7">1.5.7. Emacsclient and server</a></li>
<li><a href="#sec-1-5-8">1.5.8. Helm</a></li>
<li><a href="#sec-1-5-9">1.5.9. Hydra - Making Emacs bindings stick around</a></li>
<li><a href="#sec-1-5-10">1.5.10. IDO</a></li>
<li><a href="#sec-1-5-11">1.5.11. Instant messaging: jabber &amp; irc</a>
<ul>
<li><a href="#sec-1-5-11-1">1.5.11.1. Jabber</a></li>
<li><a href="#sec-1-5-11-2">1.5.11.2. IRC</a></li>
</ul>
</li>
<li><a href="#sec-1-5-12">1.5.12. Ledger</a></li>
<li><a href="#sec-1-5-13">1.5.13. magit</a></li>
<li><a href="#sec-1-5-14">1.5.14. Music with EMMS</a></li>
<li><a href="#sec-1-5-15">1.5.15. Powerline</a></li>
<li><a href="#sec-1-5-16">1.5.16. Tmux integration</a></li>
<li><a href="#sec-1-5-17">1.5.17. Twitter</a></li>
<li><a href="#sec-1-5-18">1.5.18. Window Management</a></li>
</ul>
</li>
<li><a href="#sec-1-6">1.6. General configuration</a>
<ul>
<li><a href="#sec-1-6-1">1.6.1. Basics</a></li>
<li><a href="#sec-1-6-2">1.6.2. Saving and History</a></li>
<li><a href="#sec-1-6-3">1.6.3. Appearance</a></li>
<li><a href="#sec-1-6-4">1.6.4. Themes</a></li>
<li><a href="#sec-1-6-5">1.6.5. Fonts</a></li>
<li><a href="#sec-1-6-6">1.6.6. Behavior</a>
<ul>
<li><a href="#sec-1-6-6-1">1.6.6.1. Buffers</a></li>
<li><a href="#sec-1-6-6-2">1.6.6.2. Windows</a></li>
<li><a href="#sec-1-6-6-3">1.6.6.3. Mouse</a></li>
<li><a href="#sec-1-6-6-4">1.6.6.4. General</a></li>
<li><a href="#sec-1-6-6-5">1.6.6.5. <span class="done DONE">DONE</span> Making opening files easier</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-7">1.7. Programming and Editing</a>
<ul>
<li><a href="#sec-1-7-1">1.7.1. Basics</a></li>
<li><a href="#sec-1-7-2">1.7.2. Lisp</a></li>
<li><a href="#sec-1-7-3">1.7.3. Lua</a></li>
<li><a href="#sec-1-7-4">1.7.4. Markdown</a></li>
<li><a href="#sec-1-7-5">1.7.5. Python</a></li>
<li><a href="#sec-1-7-6">1.7.6. Shell scripts</a></li>
<li><a href="#sec-1-7-7">1.7.7. Text</a></li>
<li><a href="#sec-1-7-8">1.7.8. YAML</a></li>
<li><a href="#sec-1-7-9">1.7.9. JSON</a></li>
</ul>
</li>
<li><a href="#sec-1-8">1.8. Mail configuration</a>
<ul>
<li><a href="#sec-1-8-1">1.8.1. General</a></li>
<li><a href="#sec-1-8-2">1.8.2. Sending email</a></li>
<li><a href="#sec-1-8-3">1.8.3. Mutt</a></li>
<li><a href="#sec-1-8-4">1.8.4. Multiple identities</a></li>
<li><a href="#sec-1-8-5">1.8.5. offlineimap</a></li>
<li><a href="#sec-1-8-6">1.8.6. notmuch</a></li>
<li><a href="#sec-1-8-7">1.8.7. mu4e</a></li>
<li><a href="#sec-1-8-8">1.8.8. vm</a></li>
<li><a href="#sec-1-8-9">1.8.9. gnus</a>
<ul>
<li><a href="#sec-1-8-9-1">1.8.9.1. Group buffer</a></li>
<li><a href="#sec-1-8-9-2">1.8.9.2. Server buffer</a></li>
<li><a href="#sec-1-8-9-3">1.8.9.3. Summary buffer</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-9">1.9. Le Fin</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Emacs Configuration</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> About this file</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<a id="babel-init" name="babel-init"></a>
</p>

<p>
This is my Emacs configuration (mostly) maintained in one file, that is
kept organized with <b>org-mode</b>. It is inspired from a variety of
sources, including (in no particular order):
</p>

<ul class="org-ul">
<li><a href="http://sachachua.com/blog/">Sacha Chua</a>'s <a href="http://sachac.github.io/.emacs.d/Sacha.html">emacs configuration</a>
</li>
<li><a href="http://eschulte.github.io/emacs24-starter-kit/">Emacs Starter Kit</a>
</li>
<li><a href="http://www.wisdomandwonder.com/wordpress/wp-content/uploads/2014/03/C3F.html">Creation and conservation of computer files</a>, and later <a href="https://github.com/grettke/home/blob/master/ALEC.org">ALEC</a>
</li>
<li><a href="http://kitchingroup.cheme.cmu.edu/blog/">John Kitchin</a>'s <a href="https://github.com/jkitchin/jmax">emacs configuration</a>
</li>
<li><a href="http://doc.norang.ca/org-mode.html">Bernt Hansen (norang.ca) Org Mode</a> (Organize Your Life in Plain Text)
</li>
<li><a href="http://www.djcbsoftware.nl/dot-emacs.html">DJCB (EmacsWiki)</a>
</li>
<li><a href="http://bzg.fr/emacs.html">Bastien Guerry</a>
</li>
<li><a href="https://github.com/larstvei/dot-emacs">Lars Tveito</a>
</li>
<li><a href="https://github.com/purcell/emacs.d">Steve Purcell</a>
</li>
<li><a href="http://zeekat.nl/articles/making-emacs-work-for-me.html">Making Emacs work for me</a>
</li>
<li><a href="https://github.com/howardabrams/dot-files">Howard Abrams</a>
</li>
<li><a href="https://github.com/jd/emacs.d">Julien Danjou</a>
</li>
<li><a href="https://github.com/joedicastro/dotfiles/tree/master/emacs">Joe Di Castro</a>
</li>
</ul>

<p>
Embedding Emacs configuration in <b>org-mode</b> is heavily inspired by the
ideas in <a href="http://en.wikipedia.org/wiki/Literate_programming">Literate Programming</a>.
</p>

<p>
This will hopefully lend itself better to explain and track why I
use different elements in my configuration, including discussion,
comments, todo items, and so on.
</p>

<p>
First thing's first: a base config is needed in <code>~/.emacs.d/init.el</code>.
Remember to keep this simple.  :-)
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'package
(package-initialize t)
(require 'org)
(require 'ob-tangle)

; load up private configuration
(if (file-exists-p (concat user-emacs-directory "private.org"))
  (org-babel-load-file (concat user-emacs-directory "private.org"))
  )

; load up the bulk of my configuration
(org-babel-load-file (concat user-emacs-directory "emacs.org"))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Personal information</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Set my name.  <code>user-mail-address</code> is defined in <i>private.org</i>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq user-full-name "Stephen Fromm")
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Emacs initialization</h3>
<div class="outline-text-3" id="text-1-3">
<p>
The first time this file is loaded, it will take awhile to install the
miscellaneous packages.  This will not be an issue the second time you
start Emacs with this configuration.
</p>
</div>

<div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> Add package sources</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
Use <code>M-x package-refresh-contents</code> to reload the list of packages
after adding these for the first time.
</p>

<p>
MELPA is probably the more popular package repository.  It also has lots
of packages compared to other repositories.  Be aware that MELPA uses
snapshots instead of 'stable' releases.
</p>

<ul class="org-ul">
<li><span class="timestamp-wrapper"><span class="timestamp">[2014-05-16 Fri]</span></span> <a href="http://emacsredux.com/blog/2014/05/16/melpa-stable/">Turns out</a> that there is also a <a href="http://melpa-stable.milkbox.net/#/">MELPA stable</a>.  I
should add that to the <code>package-archive</code> list.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq package-archives '(
                         ("org" . "http://orgmode.org/elpa/")
                         ("melpa" . "http://melpa.org/packages/")
                         ("gnu" . "http://elpa.gnu.org/packages/")
                         ("marmalade" . "http://marmalade-repo.org/packages/")
                         ("e6h" . "http://www.e6h.org/packages/")
                         ))
(package-initialize)
(require 'package)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> Install packages if necessary</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
ELPA provides a nice resource to install packages.  The following
function facilitates installing packages from ELPA.  It will refresh the
package database before trying to install a package.
</p>

<p>
Further down, I also use the feature from <code>use-package</code> where it can
install a package.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun sf/package-install (package)
  "Install PACKAGE it not yet installed."
  (unless (package-installed-p package)
    (message "%s" "Refreshing package database...")
    (package-refresh-contents)
    (message "%s" " done.")
    (package-install package)
    (delete-other-windows)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-3" class="outline-4">
<h4 id="sec-1-3-3"><span class="section-number-4">1.3.3</span> Define lisp directories and Use use-package</h4>
<div class="outline-text-4" id="text-1-3-3">
<p>
The following directories have lisp files that I will user later on.
Best to load them now.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'load-path "~/.emacs.d/site-lisp")
</pre>
</div>

<p>
<a href="https://github.com/jwiegley/use-package">use-package</a> is a declaration macro that allows you to isolate package
configuration in your Emacs configuration.  This <a href="http://ericjmritz.name/2013/11/25/simplify-emacs-configuration-with-use-package/">page</a> provides an
example of how to use <code>use-package</code>.  Don't forget the <a href="https://github.com/jwiegley/use-package/blob/master/README.md">documentation</a> for
<b>use-package</b>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'use-package)
(require 'use-package)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-4" class="outline-4">
<h4 id="sec-1-3-4"><span class="section-number-4">1.3.4</span> Funtions and other building blocks</h4>
<div class="outline-text-4" id="text-1-3-4">
<p>
Pull in some packages that will be useful later.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'cl)
</pre>
</div>

<p>
Define a function that will switch to the last used buffer.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun sf/switch-to-last-buffer ()
  (interactive)
  (switch-to-buffer (other-buffer (current-buffer) 1)))
</pre>
</div>

<p>
Save all buffers and then run <code>depot-sync.sh</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun sf/save-all ()
  (interactive)
  (progn
    (message "Saving buffers at %s" (format-time-string "%Y-%m-%dT%T"))
    (save-some-buffers t)
    ; (with-temp-buffer (async-shell-command "depot-sync.sh" t))
    ))
</pre>
</div>

<p>
Define function that will disable <code>global-linum</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun sf/nolinum ()
  "Disable global-linum-mode"
  (global-linum-mode 0))
</pre>
</div>

<p>
Function to create a full ISO 8601 format timestamp.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun sf/timestamp ()
  "Insert full ISO 8601 format timestamp"
  (interactive)
  (insert (format-time-string "%Y-%m-%dT%T%z")))
</pre>
</div>

<p>
Toggle whitespace cues.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun sf/whitespace ()
  "Enable whitespace visualizations"
  (setq highlight-tabs t)
  (setq show-trailing-whitespace t))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-5" class="outline-4">
<h4 id="sec-1-3-5"><span class="section-number-4">1.3.5</span> <span class="done DONE">DONE</span> Load encrypted secrets</h4>
<div class="outline-text-4" id="text-1-3-5">
<p>
<a id="emacs-secrets" name="emacs-secrets"></a>
</p>

<p>
The following uses <a href="http://www.gnu.org/software/emacs/manual/html_mono/epa.html">EasyPG Assistant</a> for the encryption.  This enables
you to store secrets (aka passwords) in a separate, encrypted file that
is loaded when needed.
</p>

<p>
I updated this to be in a function so that it doesn't prompt right away
when starting Emacs.  This function can then be called by other parts as
needed.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">;  (eval-after-load 'erc
;    (progn
;      (load-file (concat user-emacs-directory "secrets.el.gpg"))
;    ))
</pre>
</div>

<p>
The following was a helpful resource when setting this up.
</p>

<p>
<a href="http://emacs-fu.blogspot.com/2011/02/keeping-your-secrets-secret.html">http://emacs-fu.blogspot.com/2011/02/keeping-your-secrets-secret.html</a>
</p>

<ul class="org-ul">
<li><span class="timestamp-wrapper"><span class="timestamp">[2015-03-12 Thu]</span></span> I don't really use this anymore.  For passwords, I
use an encrypted <i>authinfo</i>.  For <i>private.org</i>, I maintain that
separately.
</li>
</ul>
</div>

<div id="outline-container-sec-1-3-5-1" class="outline-5">
<h5 id="sec-1-3-5-1"><span class="section-number-5">1.3.5.1</span> CANCELLED Consider using <code>gpg-agent</code> and public key encryption</h5>
<div class="outline-text-5" id="text-1-3-5-1">
</div>
</div>

<div id="outline-container-sec-1-3-5-2" class="outline-5">
<h5 id="sec-1-3-5-2"><span class="section-number-5">1.3.5.2</span> CANCELLED Consider loading secrets file on demand</h5>
<div class="outline-text-5" id="text-1-3-5-2">
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Org mode</h3>
<div class="outline-text-3" id="text-1-4">
<p>
<a href="http://orgmode.org/">Org mode</a> is a big reason why I've switched back to Emacs.  I use it for
taking notes, tracking projects and todo items, and other miscellaneous
items.
</p>

<p>
Things to bring up org-mode.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd "&lt;f8&gt;") 'org-cycle-agenda-files)
(global-set-key (kbd "&lt;f12&gt;") 'org-agenda)
(global-set-key "\C-cl" 'org-store-link)
(global-set-key "\C-cc" 'org-capture)
(global-set-key "\C-ca" 'org-agenda)
(global-set-key "\C-cb" 'org-switchb)
</pre>
</div>

<p>
The following does lots of things:
</p>

<ul class="org-ul">
<li>Enable spell-check when in <b>org-mode</b>.
</li>
<li>Define the default <code>org-directory</code>.
</li>
<li>Make agenda views <i>sticky</i> via <code>org-agenda-sticky</code>.  This basically
means that when you switch to <span class="underline">org-agenda</span>, Emacs will switch to the
<span class="underline">org-agenda</span> buffer but not refresh it.  You need to manually refresh
it by hand with <span class="underline">r</span> or <span class="underline">g</span>.
</li>
<li>Define where to capture notes (<code>org-default-notes-file</code>) and the
templates to use (<code>org-capture-templates</code>).
</li>
<li>Note when a task is rescheduled.
</li>
<li>This defines some basics like where and what files with
<code>org-agenda-files</code>.
</li>
<li>Define <code>org-todo-keywords</code>.  This is discussed in the <a href="http://orgmode.org/manual/TODO-Items.html">manual</a>.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package org-plus-contrib
  :diminish org-mode
  :ensure t
  :init
  (progn
    (add-hook 'org-mode-hook 'turn-on-auto-fill)
    (add-hook 'org-mode-hook '(lambda() (set-fill-column 72)))
    (add-hook 'org-mode-hook 'turn-on-flyspell 'append)
    (add-to-list 'auto-mode-alist '("doc/org/.*\\.org$" . org-mode))
    (setq
      org-directory "~/depot/doc/org"
      org-agenda-sticky t
      org-default-notes-file (concat org-directory "/journal.org")
      org-id-link-to-org-use-id 'create-if-interactive-and-no-custom-id
      org-log-done t
      org-completion-use-ido t
      org-log-reschedule "note"
      org-agenda-files (list
                         (concat org-directory "/journal.org")
                         (concat org-directory "/work.org")
                         (concat org-directory "/personal.org"))
      org-capture-templates '(
                               ("j" "Journal" entry (file+datetree (concat org-directory "/journal.org"))
                                 "* %?%U\n")
                               )
      org-file-apps (quote ((auto-mode . emacs)
                             ("\\.doc\\'" . "ooffice %s")
                             ("\\.docx\\'" . "ooffice %s")
                             ("\\.xlsx\\'" . "ooffice %s")
                             ("\\.pptx\\'" . "ooffice %s")
                             ("\\.pdf\\'" . default)))
      org-modules '(org-w3m org-bbdb
                     org-bibtex org-docview
                     org-gnus org-info
                     org-irc org-mhe org-rmail org-habit)
      org-todo-keywords '(
                           (sequence "TODO(t)" "WAITING(w)" "DELEGATED(l)" "|" "DONE(d)")
                           (sequence "|" "CANCELLED(c)")
                           )
      )
    (org-load-modules-maybe t)
    ))
</pre>
</div>

<p>
Finally, pull in <b>org-git-link</b> to reference git links.  More
information available <a href="http://orgmode.org/worg/org-contrib/org-git-link.html">here</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package org-git-link
  :load-path "package/org-mode/contrib/lisp")
</pre>
</div>
</div>

<div id="outline-container-sec-1-4-1" class="outline-4">
<h4 id="sec-1-4-1"><span class="section-number-4">1.4.1</span> Contacts</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
Instead of tinkering with <b>BBDB</b>, which seemed to require more energy
than I want to commit, <b><a href="https://julien.danjou.info/projects/emacs-packages#org-contacts">org-contacts</a></b> looks like a good alternative.
It is <i>org-ish</i> which is also a plus.  If <span class="underline">org-contacts-files</span> is not
set, <b>org-contacts</b> will search all your Org files.  Since I'm storing
contacts elsewhere, this needs to be set.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  (use-package org-contacts
    :load-path "package/org-mode/contrib/lisp"
    :config
    (progn
      (setq org-contacts-files (list  "~/depot/doc/org/contacts.org"))
      (push '("c" "Contacts" entry (file (concat org-directory "/contacts.org"))
               "* %(org-contacts-template-name)
:PROPERTIES:
:EMAIL: %(org-contacts-template-email)
:PHONE:
:ADDRESS:
:BIRTHDAY:
:END:") org-capture-templates)
      )
    )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-2" class="outline-4">
<h4 id="sec-1-4-2"><span class="section-number-4">1.4.2</span> Pomodoro</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
The <a href="http://pomodorotechnique.com/">pomodoro technique</a> is basically about time management.  You use a
timer to break down work into intervals, traditionally 25 minutes in
length, separated by short breaks.  The following installs
<b>org-pomodoro</b> and sets up hooks to do notifications.  It also overrides
the normal org-mode <i>clock-in</i> and <i>clock-out</i> functions.  These are
normally <b>org-clock-in</b> and <b>org-clock-out</b>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'org-pomodoro)
(global-set-key (kbd "C-c C-x C-i") 'org-pomodoro)
(global-set-key (kbd "C-c C-x C-o") 'org-pomodoro)
(defun sf/notify-pomodoro (title message)
  (notifications-notify
    :title title
    :body message
    :urgency 'low))

(add-hook 'org-pomodoro-finished-hook
  (lambda ()
    (sf/notify-pomodoro "Pomodoro completed" "Time for a break")))

(add-hook 'org-pomodoro-break-finished-hook
  (lambda ()
    (sf/notify-pomodoro "Break completed" "Ready for another?")))

(add-hook 'org-pomodoro-long-break-finished-hook
  (lambda ()
    (sf/notify-pomodoro "Long break completed" "Ready for another?")))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-3" class="outline-4">
<h4 id="sec-1-4-3"><span class="section-number-4">1.4.3</span> Babel mode</h4>
<div class="outline-text-4" id="text-1-4-3">
<p>
This defines which languages are enabled for evaluation by org-babel.
<a href="http://ditaa.sourceforge.net/">ditaa</a> allows creation of diagrams from Emacs.  May require using emacs
<code>artist-mode</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(org-babel-do-load-languages
  'org-babel-load-languages
  '((ditaa . t)
    (emacs-lisp . t)
    (org . t)
    (perl . t)
    (python . t)
    (ruby . t)
    (sh . t)
   ))
</pre>
</div>

<p>
You can type =C-c '= to edit the current code block.  This will bring up
a major-mode edit buffer containing the body of the code block.  You can
then use =C-c '= again to exit.
</p>
</div>
</div>

<div id="outline-container-sec-1-4-4" class="outline-4">
<h4 id="sec-1-4-4"><span class="section-number-4">1.4.4</span> Exporting</h4>
<div class="outline-text-4" id="text-1-4-4">
<p>
One of the (many) nice features of org-mode is that you can export to
many different formats.  What follows is miscellaneous resources online
that discuss exporting.
</p>

<ul class="org-ul">
<li><a href="http://orgmode.org/manual/Exporting.html#Exporting">Org Mode Manual, Exporting</a>
</li>
<li><a href="http://orgmode.org/worg/org-contrib/babel/examples/article-class.html">Org-article LaTeX class</a>
</li>
<li><a href="http://home.fnal.gov/~neilsen/notebook/orgExamples/org-examples.html">Emacs org-mode examples and cookbook</a>
</li>
<li><a href="http://emacs-fu.blogspot.com/2011/04/nice-looking-pdfs-with-org-mode-and.html">Emacs Fu: Nice looking PDFs with org-mode and xetex</a>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Packages</h3>
<div class="outline-text-3" id="text-1-5">
<p>
This section defines all the packages I use.  It installs (if needed)
and configures them per my usage.  Sections will come and go.
</p>
</div>

<div id="outline-container-sec-1-5-1" class="outline-4">
<h4 id="sec-1-5-1"><span class="section-number-4">1.5.1</span> Emacs vi emulation</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
I have too much Vim muscle memory to let go of the keybindings.  <a href="https://gitorious.org/evil/pages/Home">evil</a>
provides an emulation mode that I find extremely useful.
</p>

<p>
While I have <span class="underline">&lt;leader&gt;</span> configured, I don't use this as much as I used
to.  I typically use <b>helm</b> or <b>ido</b> for quickly changing between
buffers.
</p>

<p>
Lastly, this also sets the initial state of some modes to <span class="underline">emacs</span> where
it makes sense.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'evil)
(sf/package-install 'evil-leader)
(use-package evil
  :init
  (progn
    (use-package evil-leader
      :init (global-evil-leader-mode)
      :config
      (progn
        ;; evil-leader
        (evil-leader/set-leader ",")
        (evil-leader/set-key
          "," 'sf/switch-to-last-buffer)))
    (evil-mode 1))
  :config
  (progn
    (dolist (mode '(bbdb-mode erc-mode fundamental-mode shell-mode calendar-mode ))
      (evil-set-initial-state mode 'emacs))
    ))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-2" class="outline-4">
<h4 id="sec-1-5-2"><span class="section-number-4">1.5.2</span> BBDB</h4>
<div class="outline-text-4" id="text-1-5-2">
<p>
BBDB, the Big-Brother Database.  As noted elsewhere, I use <b>org-contacts</b>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package bbdb
  :disabled t
  :init
  (progn
    (bbdb-initialize)
    )
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-3" class="outline-4">
<h4 id="sec-1-5-3"><span class="section-number-4">1.5.3</span> Bookmarks</h4>
<div class="outline-text-4" id="text-1-5-3">
<p>
Bookmarks are a way to jump to files and other things.  They are saved
to <code>~/.emacs.d/bookmarks</code>. 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybinding</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-x r m</td>
<td class="left">Set bookmark for visited file, at point</td>
</tr>

<tr>
<td class="left">C-x r b BMK</td>
<td class="left">Jump to bookmark named BMK</td>
</tr>

<tr>
<td class="left">C-x r l</td>
<td class="left">List all bookmarks</td>
</tr>
</tbody>
</table>

<p>
<a href="http://oremacs.com/2015/01/06/rushing-headlong/">headlong</a>: 
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package headlong
  :ensure headlong
 )
</pre>
</div>

<p>
<a href="http://www.emacswiki.org/emacs/BookmarkPlus">Bookmark+</a>:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package bookmark+
  :ensure bookmark+
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-4" class="outline-4">
<h4 id="sec-1-5-4"><span class="section-number-4">1.5.4</span> Diminish</h4>
<div class="outline-text-4" id="text-1-5-4">
<p>
Use <code>diminish</code> to clean up clutter on the modeline.  <code>use-package</code> has a
built-in mechanism to diminish a mode.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'diminish)
;(diminish 'undo-tree-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-5" class="outline-4">
<h4 id="sec-1-5-5"><span class="section-number-4">1.5.5</span> Ediff</h4>
<div class="outline-text-4" id="text-1-5-5">
<p>
I am fairly used to <b>vimdiff</b>'s behavior.  I haven't had lots of
opportunities to familiarize myself with <b>ediff</b>, but the following
kinda-sorta helps.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq ediff-split-window-function 'split-window-horizontally)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-6" class="outline-4">
<h4 id="sec-1-5-6"><span class="section-number-4">1.5.6</span> Elfeed</h4>
<div class="outline-text-4" id="text-1-5-6">
<p>
<a href="https://github.com/skeeto/elfeed">Elfeed</a> is a web feed (ATOM and RSS) reader for Emacs.  At this point,
I'm just playing with elfeed.  I don't know whether it will replace my
other news-reading utility.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package elfeed
  :ensure elfeed
  :config
  (progn
    (setq elfeed-feeds
      '(("http://codeascraft.com/feed/" devops)
         ("http://endlessparentheses.com/atom.xml" devops emacs)
         ("http://planet.emacsen.org/atom.xml" devops emacs)
         ("http://oremacs.com/atom.xml" devops emacs)
         ("http://xkcd.com/atom.xml" comics fun)
         ("https://what-if.xkcd.com/feed.atom" fun)
         ("http://mbork.pl/?action=rss" emacs devops)
         ("http://www.howardism.org/index.xml" emacs devops)
         ("http://kitchingroup.cheme.cmu.edu/blog/feed/atom/" emacs devops)
         ("http://planetsysadmin.com/atom.xml" devops)
         ("http://planet.fedoraproject.org/atom.xml" devops linux fedora)
         ))
    (dolist (mode '(elfeed-show-mode elfeed-search-mode))
      (evil-set-initial-state mode 'emacs))
    ))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-7" class="outline-4">
<h4 id="sec-1-5-7"><span class="section-number-4">1.5.7</span> Emacsclient and server</h4>
<div class="outline-text-4" id="text-1-5-7">
<p>
This allows you to start a single Emacs process and then connect to it
via <code>emacsclient</code>.  In general, be sure to use <code>emacsclient -n</code> tells
<code>emacsclient</code> to not wait for the server to return.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(load "server")
(unless (server-running-p) (server-start))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-8" class="outline-4">
<h4 id="sec-1-5-8"><span class="section-number-4">1.5.8</span> Helm</h4>
<div class="outline-text-4" id="text-1-5-8">
<p>
<a href="https://github.com/emacs-helm/helm">Helm</a> is an incremental completion and selectio narrowing framework for
Emacs.  It helps narrow your choices when searching for files, buffers,
commands, et cetera.
</p>

<ul class="org-ul">
<li><a href="http://tuhdo.github.io/helm-intro.html">Helm: A Package in a league of its own</a>
</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybinding</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-c ?</td>
<td class="left">Display help when in Helm session</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
The following rebinds <b>C-x c</b> to <b>C-c h</b> because the former is too close
to the command <b>C-x C-c</b>, <b>save-buffers-kill-terminal</b>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package helm
  :ensure helm
  :diminish helm-mode
  :init
  (progn
    (require 'helm-config)
    (setq 
      helm-ff-skip-boring-files t
      helm-split-window-in-side-p t
      helm-ff-file-name-history-use-recentf t)
    (global-set-key (kbd "C-c h") 'helm-command-prefix)
    (global-unset-key (kbd "C-x c"))
    (helm-mode 1)
    (helm-autoresize-mode t))
  :config
    (define-key helm-map (kbd "&lt;tab&gt;") 'helm-execute-persistent-action)
  :bind (("M-x" . helm-M-x)
          ("C-x C-f" . helm-find-files)
          ("&lt;f7&gt;" . helm-recentf)
          ("C-x b" . helm-mini))
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-9" class="outline-4">
<h4 id="sec-1-5-9"><span class="section-number-4">1.5.9</span> Hydra - Making Emacs bindings stick around</h4>
<div class="outline-text-4" id="text-1-5-9">
<p>
<a href="https://github.com/abo-abo/hydra">Hydra</a> is a Emacs package that can be used to tie related commands into a
family of short bindings with a common prefix - aka the Hydra.
</p>

<p>
Abo Abo has some interesting posts on Hydra that demonstrate its
utility:
</p>

<ul class="org-ul">
<li><a href="http://oremacs.com/2015/02/03/one-hydra-two-hydra/">One Hydra Two Hydra Red Hydra Blue Hydra</a>
</li>
<li><a href="http://oremacs.com/2015/02/04/pre-hydra-post/">New in Hydra - :pre and :post clauses</a>
</li>
<li><a href="http://oremacs.com/2015/02/02/colorful-hydrae/">Colorful Hydras</a>
</li>
</ul>

<p>
Let's give it a shot.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package hydra
  :ensure t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-10" class="outline-4">
<h4 id="sec-1-5-10"><span class="section-number-4">1.5.10</span> IDO</h4>
<div class="outline-text-4" id="text-1-5-10">
<p>
A first crack at using <a href="http://www.emacswiki.org/InteractivelyDoThings">IDO</a>, aka <i>Interactively Do Things</i>.  Of
particular note, <b>ido-vertical-mode</b> is enabled again.
</p>

<p>
A few handy key-bindings when using IDO:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybinding</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-n</td>
<td class="left">move next through list</td>
</tr>

<tr>
<td class="left">C-p</td>
<td class="left">move to previous in list</td>
</tr>

<tr>
<td class="left">Tab</td>
<td class="left">display possible completion in buffer</td>
</tr>

<tr>
<td class="left">RET</td>
<td class="left">go down inside the directory in front of list</td>
</tr>

<tr>
<td class="left">backspace</td>
<td class="left">go up to parent directory</td>
</tr>

<tr>
<td class="left">//</td>
<td class="left">go to root directory</td>
</tr>

<tr>
<td class="left">~/</td>
<td class="left">go to home directory</td>
</tr>

<tr>
<td class="left">C-f</td>
<td class="left">fall back to find file</td>
</tr>

<tr>
<td class="left">C-d</td>
<td class="left">enter Dired for directory</td>
</tr>

<tr>
<td class="left">C-j</td>
<td class="left">create new file named with text you entered</td>
</tr>

<tr>
<td class="left">C-b</td>
<td class="left">go back to buffer selection mode</td>
</tr>
</tbody>
</table>

<p>
<span class="timestamp-wrapper"><span class="timestamp">[2015-02-09 Mon]</span></span>: I disabled <b>ido</b> in favor of <b>helm</b>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package ido
  :disabled t
  :init
  (progn
    (use-package ido-vertical-mode
      :ensure t
      :disabled t
      :init (ido-vertical-mode 1))
    (use-package smex
      :ensure smex
      :disabled t
      :init (smex-initialize)
      :bind ("M-x" . smex))
    (use-package flx-ido
      :ensure flx-ido
      :disabled t
      :init (flx-ido-mode 1))
    (ido-mode 1)
    (ido-everywhere t)
    (setq
      ido-enable-flex-matching t
      ido-create-new-buffer 'always
      ido-use-faces nil
      ido-use-filename-at-point nil
      ido-auto-merge-work-directories-length 0))
  :bind (("&lt;f7&gt;" . recentf-open-files)
          ("C-x b" . ido-switch-buffer))
  )
</pre>
</div>

<p>
Some possibly useful references:
</p>
<ul class="org-ul">
<li><a href="http://www.emacswiki.org/emacs/InteractivelyDoThings">EmacsWiki IDO</a>
</li>
<li><a href="http://www.masteringemacs.org/articles/2010/10/10/introduction-to-ido-mode/">Mastering Emacs: Introduction to IDO</a>
</li>
<li><a href="http://ergoemacs.org/emacs/emacs_buffer_switching.html">ErgoEmacs: Buffer switching</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-5-11" class="outline-4">
<h4 id="sec-1-5-11"><span class="section-number-4">1.5.11</span> Instant messaging: jabber &amp; irc</h4>
<div class="outline-text-4" id="text-1-5-11">
</div><div id="outline-container-sec-1-5-11-1" class="outline-5">
<h5 id="sec-1-5-11-1"><span class="section-number-5">1.5.11.1</span> Jabber</h5>
<div class="outline-text-5" id="text-1-5-11-1">
<p>
There is a jabber package for Emacs, along with a <a href="http://emacs-jabber.sourceforge.net/manual-0.8.0/index.html">manual</a>. I'm still on
the fence as to whether I want to use this.  Regardless, here's the
necessary configuration.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package jabber
  :ensure t
  :config
  (progn
    (setq 
      jabber-account-list sf/jabber-account-alist
      jabber-history-enabled t ; enable logging
      jabber-use-global-history nil
      jabber-backlog-number 40
      jabber-backlog-days 30
      jabber-history-dir "~/.local/share/logs/jabber"
      jabber-alert-info-message-hooks (quote (jabber-info-libnotify jabber-info-echo jabber-info-display))
      jabber-alert-message-hooks (quote (jabber-message-notifications jabber-message-echo jabber-message-scroll))
      jabber-alert-presence-hooks (quote ()) ; don't show anything on presence changes
      jabber-alert-muc-hooks (quote (jabber-muc-notifications-personal jabber-muc-echo jabber-muc-scroll))
      )
    (dolist (mode '(jabber-chat-mode jabber-roster-mode))
      (evil-set-initial-state mode 'emacs))
    (add-hook 'jabber-post-connect-hooks 'jabber-autoaway-start)
    )
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-11-2" class="outline-5">
<h5 id="sec-1-5-11-2"><span class="section-number-5">1.5.11.2</span> IRC</h5>
<div class="outline-text-5" id="text-1-5-11-2">
<p>
Install <a href="http://www.bitlbee.org">bitlbee</a> <a href="https://github.com/unhammer/bitlbee.el">mode</a> to facilitate chatting on other networks via IRC.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'bitlbee)
</pre>
</div>

<p>
Go ahead and setup ERC.  This will also pull in TLS and <span class="underline">notifications</span>.
More information about ERC can be found at <a href="http://www.emacswiki.org/wiki/ERC">EmacsWiki</a>.  The authinfo file
has nick and password information.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'notifications)
(require 'tls)
(use-package erc
  :config
  (progn

    (use-package erc-match
      :config
      (setq erc-track-exclude-types '("JOIN" "NICK" "PART" "QUIT" "MODE"
                                       "324" "329" "333" "353" "477")))

    (setq erc-modules '(autojoin autoaway button completion fill irccontrols
                         list log match menu move-to-prompt netsplit
                         networks notifications readonly ring
                         services smiley spelling stamp track))
    (erc-services-mode t)
    (setq
      erc-nick sf/erc-nick 
      erc-user-full-name sf/erc-nick
      erc-away-nickname sf/erc-away-nick
      erc-keywords sf/erc-keywords
      erc-auto-join-channels-alist sf/erc-channels-alist
      erc-insert-timestamp-function 'erc-insert-timestamp-left
      erc-timestamp-format "%H:%M:%S "
      ;; kill buffer after channel /part
      erc-kill-buffer-on-part t
      ;; kill buffer for server messages after /quit
      erc-kill-server-buffer-on-quit t
      ;; autoaway
      erc-auto-discard-away t
      erc-autoaway-use-emacs-idle t
      ;; logging
      erc-generate-log-file-name-function 'erc-generate-log-file-name-with-date
      erc-log-channels-directory "~/.local/share/logs/erc/"
      erc-log-insert-log-on-open nil
      erc-prompt-for-nickserv-password nil
      erc-save-buffer-on-part t)
    ))
</pre>
</div>

<p>
The following function will either start ERC or switch to the bufer.
See <a href="http://emacs-fu.blogspot.com/2009/06/erc-emacs-irc-client.html">http://emacs-fu.blogspot.com/2009/06/erc-emacs-irc-client.html</a>. 
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun sf/erc-connect ()
  "Connect to IRC via ERC"
  (interactive)
  (when (y-or-n-p "Connect to freenode? ")
    (erc-tls :server "irc.freenode.net" :port 6697))
  (when (y-or-n-p "Connect to bitlbee? ")
    (progn
      (use-package bitlbee)
      (bitlbee-start)
      (sleep-for 2)
      (erc :server "localhost" :port 6667)))
  )
</pre>
</div>

<p>
Finally, add a join hook to authenticate to <i>bitlbee</i>.  This comes from
<a href="http://www.emacswiki.org/BitlBee">emacswiki</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun bitlbee-netrc-identify ()
  "Auto-identify for Bitlbee channels using authinfo or netrc.

   The entries that we look for in netrc or authinfo files have
   their 'port' set to 'bitlbee', their 'login' or 'user' set to
   the current nickname and 'server' set to the current IRC
   server's name.  A sample value that works for authenticating
   as user 'keramida' on server 'localhost' is:

   machine localhost port bitlbee login keramida password supersecret"
  (interactive)
  (when (string= (buffer-name) "&amp;bitlbee")
    (let* ((secret (plist-get (nth 0 (auth-source-search :max 1
                                       :host erc-server
                                       :user (erc-current-nick)
                                       :port "bitlbee"))
                     :secret))
            (password (if (functionp secret)
                        (funcall secret)
                        secret)))
      (erc-message "PRIVMSG" (concat (erc-default-target) " " "identify" " " password) nil))))
;; Enable the netrc authentication function for &amp;biblbee channels.
(add-hook 'erc-join-hook 'bitlbee-netrc-identify)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-12" class="outline-4">
<h4 id="sec-1-5-12"><span class="section-number-4">1.5.12</span> Ledger</h4>
<div class="outline-text-4" id="text-1-5-12">
<p>
<a href="http://www.ledger-cli.org/">Ledger</a> is a double entry accounting system that can be used from the CLI
and from Emacs.  There is also a Haskell port, <a href="http://hledger.org/">hledger</a>, that is
compatible with ledger.  Hledger also has support for a web daemon that
may make data entry simpler.
</p>

<ul class="org-ul">
<li><a href="http://www.ledger-cli.org/3.0/doc/ledger3.html">Ledger 3 Documentation</a>
</li>
<li><a href="http://www.ledger-cli.org/3.0/doc/ledger-mode.html">Ledger Mode</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package ledger-mode
  :ensure t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-13" class="outline-4">
<h4 id="sec-1-5-13"><span class="section-number-4">1.5.13</span> magit</h4>
<div class="outline-text-4" id="text-1-5-13">
<p>
I use <a href="http://magit.github.io/">magit</a>, the emacs mode for git.  It can be used to review diffs,
commit, push changes, and other things.  Documentation is available in
<span class="underline">info</span> and <a href="http://magit.github.io/master/magit.html">online</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package magit
  :ensure t
  :commands magit-status
  :bind ("C-x g" . magit-status))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-14" class="outline-4">
<h4 id="sec-1-5-14"><span class="section-number-4">1.5.14</span> Music with EMMS</h4>
<div class="outline-text-4" id="text-1-5-14">
<p>
<a href="https://www.gnu.org/software/emms/manual/index.html">EMMS</a> is a multimedia system for Emacs.  I only want it as a way to
interact with <a href="http://www.musicpd.org/">MPD</a>.  I commented the blob out, but left it here for
posterity.  Work needed includes: key-bindings and browser-mode.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">;; (require 'emms-setup)
;; (require 'emms-player-mpd)
;; (require 'emms-playing-time)
;; (require 'emms-playlist-mode)
;; (emms-playing-time 1)
;; (setq
;;   emms-player-mpd-server-name "localhost"
;;   emms-player-mpd-music-directory "~/mpd/Music"
;; )
;; (add-to-list 'emms-player-list 'emms-player-mpd)
;; (add-to-list 'emms-info-functions 'emms-info-mpd)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-15" class="outline-4">
<h4 id="sec-1-5-15"><span class="section-number-4">1.5.15</span> Powerline</h4>
<div class="outline-text-4" id="text-1-5-15">
<p>
One way to get a fancy modeline.  Disabled for now.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package powerline
  :disabled t
  :ensure t
  :init (powerline-default-theme))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-16" class="outline-4">
<h4 id="sec-1-5-16"><span class="section-number-4">1.5.16</span> Tmux integration</h4>
<div class="outline-text-4" id="text-1-5-16">
<p>
<a href="https://github.com/syohex/emacs-emamux">Emamux</a> allows you to interact with tmux from Emacs.  Should be
interesting to try, but have yet to hit on a use-case.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package emamux
  :ensure emamux)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-17" class="outline-4">
<h4 id="sec-1-5-17"><span class="section-number-4">1.5.17</span> Twitter</h4>
<div class="outline-text-4" id="text-1-5-17">
<p>
<a href="https://github.com/hayamiz/twittering-mode">Twittering</a> is a major mode that allows access to Twitter.  You can start
<b>twittering</b> with <code>M-x twit</code>.  
</p>

<p>
Keybindings of interest:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">g</td>
<td class="left">Update current timeline</td>
</tr>

<tr>
<td class="left">V</td>
<td class="left">Open or switch timeline</td>
</tr>

<tr>
<td class="left">u</td>
<td class="left">Post tweet</td>
</tr>

<tr>
<td class="left">RET</td>
<td class="left">Post reply to pointed tweet</td>
</tr>

<tr>
<td class="left">C-c RET</td>
<td class="left">Post organic retweet</td>
</tr>

<tr>
<td class="left">C-u C-c RET</td>
<td class="left">Post official retweet</td>
</tr>

<tr>
<td class="left">d</td>
<td class="left">Send direct message</td>
</tr>

<tr>
<td class="left">C-c C-w</td>
<td class="left">Delete the pointed tweet</td>
</tr>

<tr>
<td class="left">0</td>
<td class="left">Go to beginning of line</td>
</tr>

<tr>
<td class="left">^</td>
<td class="left">Go to beginning of text on the line</td>
</tr>

<tr>
<td class="left">$</td>
<td class="left">Go to end of the line</td>
</tr>

<tr>
<td class="left">G</td>
<td class="left">Go to bottom tweet</td>
</tr>

<tr>
<td class="left">H</td>
<td class="left">Go to top tweet</td>
</tr>

<tr>
<td class="left">h</td>
<td class="left">Move cursor left</td>
</tr>

<tr>
<td class="left">j</td>
<td class="left">Go to next tweet</td>
</tr>

<tr>
<td class="left">k</td>
<td class="left">Go to previous tweet</td>
</tr>

<tr>
<td class="left">l</td>
<td class="left">Move cursor right</td>
</tr>

<tr>
<td class="left">n</td>
<td class="left">Go to next tweet by the author</td>
</tr>

<tr>
<td class="left">p</td>
<td class="left">Go to previous tweet by author</td>
</tr>

<tr>
<td class="left">TAB</td>
<td class="left">Go to next thing (link, user, URL)</td>
</tr>

<tr>
<td class="left">M-TAB</td>
<td class="left">Go to previous thing</td>
</tr>

<tr>
<td class="left">C-v / SPC</td>
<td class="left">Scroll buffer upward</td>
</tr>

<tr>
<td class="left">M-v / &lt;backspace</td>
<td class="left">Scroll buffer downward</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package twittering-mode
  :ensure twittering-mode
  :config
  (progn
    (setq
      twittering-icon-mode nil
      twittering-use-master-password t
      )
    ))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-18" class="outline-4">
<h4 id="sec-1-5-18"><span class="section-number-4">1.5.18</span> Window Management</h4>
<div class="outline-text-4" id="text-1-5-18">
<p>
<a href="https://github.com/abo-abo/ace-window">ace-window</a> is a mechanism to quickly switch between windows in an Emacs
frame.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package ace-window :ensure ace-window)
</pre>
</div>

<p>
<a href="http://www.emacswiki.org/emacs/TransposeFrame">Transpose Frame</a> is a utility to quickly transpose the arrangement of
windows in the current frame.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package transpose-frame :ensure transpose-frame)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> General configuration</h3>
<div class="outline-text-3" id="text-1-6">
<p>
And finally, we get to general configuration of Emacs.  ;-)
</p>
</div>

<div id="outline-container-sec-1-6-1" class="outline-4">
<h4 id="sec-1-6-1"><span class="section-number-4">1.6.1</span> Basics</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
Use UTF-8 as the default locale.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(prefer-coding-system 'utf-8)
</pre>
</div>

<p>
Define format for line numbers on the side, when <b>linum-mode</b> is
enabled.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq linum-format "%4d")
</pre>
</div>

<p>
Turn on highlighting of current line.  See Emacs manual on <a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Cursor-Display.html">Cursor Display</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-hl-line-mode 1)
</pre>
</div>

<p>
Skip the splash screen &#x2026;
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq inhibit-splash-screen t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-2" class="outline-4">
<h4 id="sec-1-6-2"><span class="section-number-4">1.6.2</span> Saving and History</h4>
<div class="outline-text-4" id="text-1-6-2">
<p>
Save commands and their history.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq savehist-file "~/.emacs.d/savehist")
(savehist-mode 1)
(setq savehist-save-minibuffer-history 1)
(setq savehist-additional-variables
  '(kill-ring search-ring regexp-search-ring))
</pre>
</div>

<p>
The following will control <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Auto-Save-Control.html">auto-save</a> behavior.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq auto-save-timeout 120)
(setq auto-save-interval 1000)
</pre>
</div>

<p>
With Emacs 24.4, the following will allow you to use the
<span class="underline">focus-out-hook</span> for different things.  My preference here is to
instruct Emacs to save buffers.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(when (version&lt;= "24.4" emacs-version)
  (add-hook 'focus-out-hook 'sf/save-all))
</pre>
</div>

<p>
Some sort of alternative would be nice.  I tried
<code>mouse-leave-buffer-hook</code>, but that fires more often than I'd like.  It
is important to remember that buffer != X11 window.  The old idea of
running <code>sf/save-all</code> on a schedule is not that great either.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">;;  (add-hook 'mouse-leave-buffer-hook 'sf/save-all)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-3" class="outline-4">
<h4 id="sec-1-6-3"><span class="section-number-4">1.6.3</span> Appearance</h4>
<div class="outline-text-4" id="text-1-6-3">
<p>
A few things when in graphical mode:
</p>
<ul class="org-ul">
<li>Disable the toolbar and scroll bar.
</li>
<li>Enable <a href="http://www.nyan.cat/">Nyan Cat</a>!
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'nyan-mode)
(when (display-graphic-p)
  (tool-bar-mode -1)
;  (set-scroll-bar-mode 'right)
  (scroll-bar-mode -1)
  (nyan-mode)
  )
</pre>
</div>

<p>
Activate syntax highlighting.  See <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Font-Lock.html">Font Lock</a> in the Emacs manual.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'font-lock)
(global-font-lock-mode 1)
(setq font-lock-use-default-colors t)
</pre>
</div>

<p>
Add some information to the mode line: line, column, battery remaining,
and the time.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq line-number-mode t)
(setq column-number-mode t)
(setq display-battery-mode t)
(setq display-time-24hr-format t)
(display-battery-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-4" class="outline-4">
<h4 id="sec-1-6-4"><span class="section-number-4">1.6.4</span> Themes</h4>
<div class="outline-text-4" id="text-1-6-4">
<p>
This installs and enables an Emacs theme.  I try out different themes on
a regular basis, but have been partial to <a href="http://ethanschoonover.com/solarized">Solarized</a> for a long time.
More about Emacs themes can be read in the manual on <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Custom-Themes.html">custom-themes</a>.
This only loads the theme if there is graphical display present.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(dolist (p '(gruvbox-theme
             naquadah-theme solarized-theme
             color-theme-sanityinc-tomorrow
             spacegray-theme ample-theme
             tronesque-theme))
  (progn (sf/package-install p)))
(when (display-graphic-p)
  (load-theme 'solarized-dark t))
</pre>
</div>

<p>
More information about themes can be found at EmacsWiki:
</p>

<p>
<a href="http://www.emacswiki.org/emacs/ColorTheme">http://www.emacswiki.org/emacs/ColorTheme</a>
</p>

<p>
This includes installing a theme for one buffer (<code>M-x
color-theme-buffer-local</code>) or for a specific frame.  You can also toggle
between day/night (light/dark) themes.
</p>
</div>
</div>

<div id="outline-container-sec-1-6-5" class="outline-4">
<h4 id="sec-1-6-5"><span class="section-number-4">1.6.5</span> Fonts</h4>
<div class="outline-text-4" id="text-1-6-5">
<p>
Lastly, let's set the font and size.  For awhile, I've been comfortable
with <span class="underline">Inconsolata</span>.  An alternative to this is <span class="underline">DejaVu Sans Mono</span>.
</p>

<p>
This is taken from <a href="http://www.wisdomandwonder.com/wordpress/wp-content/uploads/2014/03/C3F.html#sec-11-3">C3F</a> section on fonts.
</p>

<p>
This used to bind <b>C-=</b> to <b>sf/font-size-increase</b> and <b>C--</b> to
<b>sf/font-size-decrease</b>.  With <i>Emacs-24.4</i>, this didn't work anymore.
While it would be prudent to investigate why, I discovered that <b>C-x
C-=</b>, <b>C-x C--</b>, and <b>C-x C-0</b> are bound to <b>text-scale-adjust</b>.  This
will increase, decrease, and reset the font size.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defconst sf/font-base "DejaVu Sans Mono" "Preferred font")
(defvar sf/font-size 10 "Preferred font size")
(defun sf/font-ok-p ()
  "Is configured font valid?"
  (interactive)
  (member sf/font-base (font-family-list)))
(defun sf/font-name ()
  "Compute font name and size string"
  (interactive)
  (let* ((size (number-to-string sf/font-size))
          (name (concat sf/font-base "-" size)))
    name))
(defun sf/font-size-increase ()
  "Increase font size"
  (interactive)
  (setq sf/font-size (+ sf/font-size 1))
  (sf/font-update))
(defun sf/font-size-decrease ()
  "Decrease font size"
  (interactive)
  (setq sf/font-size (- sf/font-size 1))
  (sf/font-update))
(defun sf/font-update ()
  "Update font configuration"
  (interactive)
  (if (sf/font-ok-p)
    (progn
      (message "Setting font to: %s" (sf/font-name))
      (set-default-font (sf/font-name)))))
(sf/font-update)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-6" class="outline-4">
<h4 id="sec-1-6-6"><span class="section-number-4">1.6.6</span> Behavior</h4>
<div class="outline-text-4" id="text-1-6-6">
</div><div id="outline-container-sec-1-6-6-1" class="outline-5">
<h5 id="sec-1-6-6-1"><span class="section-number-5">1.6.6.1</span> Buffers</h5>
<div class="outline-text-5" id="text-1-6-6-1">
<p>
Use <code>uniquify</code> to make two (or more) buffers open with the same file
name distinguishable.  The configuration below tries to best match the
full path name.  Try to ignore special buffers.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'uniquify)
(setq 
  uniquify-buffer-name-style 'forward
  uniquify-separator "/"
  uniquify-ignore-buffers-re "^\\*"
  uniquify-after-kill-buffer-p t)
</pre>
</div>

<ul class="org-ul">
<li><span class="timestamp-wrapper"><span class="timestamp">[2015-03-04 Wed]</span></span> Drop <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Iswitchb.html">iswitchb</a> as it is deprecated.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-6-6-2" class="outline-5">
<h5 id="sec-1-6-6-2"><span class="section-number-5">1.6.6.2</span> Windows</h5>
<div class="outline-text-5" id="text-1-6-6-2">
<p>
I used to use <span class="underline">switch-window</span> to navigate between windows.  Nowadays, I
use either <code>helm</code> or the <code>hydra</code> below.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'switch-window)
;; (use-package switch-window
;;   :bind ("C-x o" . switch-window)
;;   :init
;;   (progn (setq switch-window-shortcut-style 'alphabet)))
</pre>
</div>

<p>
This is my preferred mechanism to navigate between windows.  It uses
<code>hydra</code>, <code>ace-window</code>, and <code>windmove</code> (among others).  This is taken
from <a href="http://oremacs.com/2015/02/04/pre-hydra-post/">oremacs.com</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key
  (kbd "C-M-o")
  (defhydra hydra-window ()
    "window"
    ("h" windmove-left)
    ("j" windmove-down)
    ("k" windmove-up)
    ("l" windmove-right)
    ("v" (lambda ()
           (interactive)
           (split-window-right)
           (windmove-right)) "vert")
    ("x" (lambda ()
           (interactive)
           (split-window-below)
           (windmove-down)) "horz")
    ("t" transpose-frame "'")
    ("o" delete-other-windows "one" :color blue)
    ("a" ace-window "ace")
    ("s" ace-swap-window "swap")
    ("d" ace-delete-window "del")
    ("i" ace-maximize-window "ace-one" :color blue)
    ("b" ido-switch-buffer "buf")
    ("m" headlong-bookmark-jump "bmk")
    ("q" nil "cancel")))
</pre>
</div>

<p>
I'm not using <code>ace-jump</code> at this time.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">;  (sf/package-install 'ace-jump-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-6-3" class="outline-5">
<h5 id="sec-1-6-6-3"><span class="section-number-5">1.6.6.3</span> Mouse</h5>
<div class="outline-text-5" id="text-1-6-6-3">
<p>
The following tries to smooth out mouse scrolling so that it isn't so
jumpy.  There are a couple references:
</p>

<ul class="org-ul">
<li><a href="http://www.emacswiki.org/emacs/SmoothScrolling">http://www.emacswiki.org/emacs/SmoothScrolling</a>
</li>
<li><a href="http://stackoverflow.com/questions/3631220/fix-to-get-smooth-scrolling-in-emacs">http://stackoverflow.com/questions/3631220/fix-to-get-smooth-scrolling-in-emacs</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq 
  scroll-step 1               ;; keyboard scroll one line at a time
  scroll-conservatively 10000
  scroll-preserve-screen-position 1
  mouse-wheel-follow-mouse 't ;; scroll window under mouse
  mouse-wheel-progressive-speed nil     ;;  don't accelerate scrolling
  mouse-wheel-scroll-amount '(1 ((shift) . 1))) ;; one line at a time
</pre>
</div>

<p>
Autoselect the window with the mouse pointer.  This is effectively
<i>focus-follows-mouse</i>, but for windows in an Emacs frame.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq mouse-autoselect-window t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-6-4" class="outline-5">
<h5 id="sec-1-6-6-4"><span class="section-number-5">1.6.6.4</span> General</h5>
<div class="outline-text-5" id="text-1-6-6-4">
<p>
In general, use spaces instead of tabs.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-default indent-tabs-mode nil)
</pre>
</div>

<p>
This defines where values are set if you use Customize.  My preference
is to configure things here or in <span class="underline">init.el</span>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq custom-file (concat user-emacs-directory "custom.el"))
(when (file-exists-p custom-file)
  (load custom-file))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-6-5" class="outline-5">
<h5 id="sec-1-6-6-5"><span class="section-number-5">1.6.6.5</span> <span class="done DONE">DONE</span> Making opening files easier</h5>
<div class="outline-text-5" id="text-1-6-6-5">
<p>
Emacs provides a mode called <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/File-Conveniences.html">recentf-mode</a> that will track files you
open.  When you call <code>recentf-open-files</code>, it will present a numbered
list and you can then select the file to open.  <a href="http://ergoemacs.org/">ErgoEmacs</a> also discusses
how to configure <a href="http://ergoemacs.org/emacs/emacs_recentf.html">recentf-mode</a>.
</p>

<p>
The following enables <code>recentf-mode</code> and binds <b>F7</b> to <code>helm-recentf</code>.
It also limits the maximum number of items in the <code>recentf</code> menu.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(recentf-mode t)
(setq recentf-max-menu-items 25)
(global-set-key (kbd "&lt;f7&gt;") 'helm-recentf)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> Programming and Editing</h3>
<div class="outline-text-3" id="text-1-7">
</div><div id="outline-container-sec-1-7-1" class="outline-4">
<h4 id="sec-1-7-1"><span class="section-number-4">1.7.1</span> Basics</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
Show matching parenthesis.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(show-paren-mode t)
</pre>
</div>

<p>
I want a final newline to be added to a file when it is about to be
saved.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-default require-final-newline t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-2" class="outline-4">
<h4 id="sec-1-7-2"><span class="section-number-4">1.7.2</span> Lisp</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
A default offset of 2 seems to make sense for lisp.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq lisp-indent-offset 2)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-3" class="outline-4">
<h4 id="sec-1-7-3"><span class="section-number-4">1.7.3</span> Lua</h4>
<div class="outline-text-4" id="text-1-7-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package lua-mode
  :ensure t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-4" class="outline-4">
<h4 id="sec-1-7-4"><span class="section-number-4">1.7.4</span> Markdown</h4>
<div class="outline-text-4" id="text-1-7-4">
<p>
Help Emacs grok when to trigger <i>markdown-mode</i> when editing certain
files.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package markdown-mode
  :ensure t
  :init
  (progn
    (add-to-list 'auto-mode-alist '("\\.md\\'" . markdown-mode))
    (add-to-list 'auto-mode-alist '("\\.markdown\\'" . markdown-mode))
    ))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-5" class="outline-4">
<h4 id="sec-1-7-5"><span class="section-number-4">1.7.5</span> Python</h4>
<div class="outline-text-4" id="text-1-7-5">
<p>
Turn on <b>linum-mode</b> when editing Python files.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'python-mode-hook 'linum-mode)
(add-hook 'python-mode-hook 'sf/whitespace)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-6" class="outline-4">
<h4 id="sec-1-7-6"><span class="section-number-4">1.7.6</span> Shell scripts</h4>
<div class="outline-text-4" id="text-1-7-6">
<p>
Also turn on <b>linum-mode</b> for shell scripts.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'shell-script-mode 'linum-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-7" class="outline-4">
<h4 id="sec-1-7-7"><span class="section-number-4">1.7.7</span> Text</h4>
<div class="outline-text-4" id="text-1-7-7">
<p>
Use auto-fill and set a column width to 72.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'text-mode-hook 'turn-on-auto-fill)
(add-hook 'text-mode-hook
  '(lambda() (set-fill-column 72)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-8" class="outline-4">
<h4 id="sec-1-7-8"><span class="section-number-4">1.7.8</span> YAML</h4>
<div class="outline-text-4" id="text-1-7-8">
<p>
A helper mode when editing <a href="http://yaml.org/">YAML</a> files.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package yaml-mode
  :ensure t
  :config
  (progn
    (setq yaml-indent-offset 2)
    (add-hook 'yaml-mode-hook 'linum-mode)
    (add-hook 'yaml-mode-hook 'sf/whitespace)
    )
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-9" class="outline-4">
<h4 id="sec-1-7-9"><span class="section-number-4">1.7.9</span> JSON</h4>
<div class="outline-text-4" id="text-1-7-9">
<p>
A helper mode when editing <i>JSON</i>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package json-mode
  :ensure t
  :config
  (progn
    (add-hook 'json-mode-hook 'linum-mode)
    (add-hook 'json-mode-hook 'sf/whitespace)
    )
  )
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> Mail configuration</h3>
<div class="outline-text-3" id="text-1-8">
</div><div id="outline-container-sec-1-8-1" class="outline-4">
<h4 id="sec-1-8-1"><span class="section-number-4">1.8.1</span> General</h4>
<div class="outline-text-4" id="text-1-8-1">
<p>
I tend to try several different mail clients over time.  This includes
typical GUI clients and Emacs-based clients.  Sometimes the client
behavior is enough at odds at what I want and I don't want to bother
forcing it the way I work.  The following sets up some basics for when
using Emacs for mail.  First and foremost, Use the <code>message-user-agent</code>
for composing email.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq
  mail-user-agent 'message-user-agent
  mail-from-style 'angles
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-2" class="outline-4">
<h4 id="sec-1-8-2"><span class="section-number-4">1.8.2</span> Sending email</h4>
<div class="outline-text-4" id="text-1-8-2">
<p>
Send email via SMTP instead of using a local sendmail binary.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq message-send-mail-function 'smtpmail-send-it)
</pre>
</div>

<p>
Set up <code>message-mode</code>.  This will kill the buffer after sending an email
and set preferences for message citation and how to forward an
email. For more on configuring Emacs <code>message-mode</code>, see the <a href="https://www.gnu.org/software/emacs/manual/html_mono/message.html">manual</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq message-kill-buffer-on-exit t
  message-citation-line-format "On %a, %Y-%m-%d at %T %z, %N wrote:"
  message-citation-line-function (quote message-insert-formatted-citation-line)
  message-make-forward-subject-function (quote message-forward-subject-fwd)
  message-signature t
  message-signature-file "~/.signature"
  )
</pre>
</div>

<p>
Enable certain modes for <b>message-mode</b>:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'message-mode-hook 'footnote-mode)
(add-hook 'message-mode-hook 'turn-on-flyspell)
</pre>
</div>

<p>
The following configures default SMTP settings for <code>smtpmail</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq
  smtpmail-stream-type 'ssl
  smtpmail-smtp-server sf/smtp-server
  smtpmail-smtp-service 465
  smtpmail-smtp-user sf/smtp-user
  )
</pre>
</div>

<p>
Be sure to use an encrypted <i>authinfo</i> file.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq smtpmail-auth-credentials "~/.authinfo.gpg")
</pre>
</div>

<p>
Use <i>dired</i> to attach files to <i>notmuch</i> messages.  
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'gnus-dired)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-3" class="outline-4">
<h4 id="sec-1-8-3"><span class="section-number-4">1.8.3</span> Mutt</h4>
<div class="outline-text-4" id="text-1-8-3">
<p>
If I'm using <i>mutt</i>, I want the related buffers to behave as if they are
email-related. 
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'auto-mode-alist '("/tmp/mutt.*" . message-mode))
(add-hook 'message-mode-hook
  'turn-on-auto-fill
  (lambda()
    (auto-fill-mode t)
    (setq fill-column 72)
    (setq mail-header-separator "")
    )
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-4" class="outline-4">
<h4 id="sec-1-8-4"><span class="section-number-4">1.8.4</span> Multiple identities</h4>
<div class="outline-text-4" id="text-1-8-4">
<p>
One day, perhaps, I will want to use multiple accounts (ie. identities)
when sending email via Emacs.  Much of this was taken from <a href="http://notmuchmail.org/emacstips/#index17h2">notmuch
emacstips</a>.  You can find <code>gnus-alias.el</code> on <a href="http://www.emacswiki.org/emacs/gnus-alias.el">emacswiki</a>.
</p>

<p>
<code>gnus-alias-identity</code> takes a lot of arguments.  They are briefly
described below.
</p>

<ol class="org-ol">
<li>Account nickname
</li>
<li>Other identity it may refer to
</li>
<li>Sender address
</li>
<li>Organization header
</li>
<li>Extra headers
</li>
<li>Extra body text
</li>
<li>Signature file
</li>
</ol>

<pre class="example">
(setq gnus-alias-identity alist
  '(("gmail" nil "Joe Smith &lt;jsmith@example.net&gt;" nil nil nil nil))
  )
</pre>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq gnus-alias-identity-alist sf/gnus-alias-alist)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-5" class="outline-4">
<h4 id="sec-1-8-5"><span class="section-number-4">1.8.5</span> offlineimap</h4>
<div class="outline-text-4" id="text-1-8-5">
<p>
This is a mode to run <a href="http://offlineimap.org/">offlineimap</a> from.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package offlineimap
  :ensure t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-6" class="outline-4">
<h4 id="sec-1-8-6"><span class="section-number-4">1.8.6</span> notmuch</h4>
<div class="outline-text-4" id="text-1-8-6">
<p>
<a href="http://notmuchmail.org/">notmuch</a> is basically a mail indexer.  It helps you to better tame your
inbox with search, tagging, and other functions.  There is a CLI
interface to interact with your email in Maildir format.  Or, you can
use the Emacs notmuch client front-end. 
</p>

<p>
If you want to follow development more closely than one's distribution,
the following will checkout and build source on RedHat derived
distributions.
</p>

<pre class="example">
$ git clone git://notmuchmail.org/git/notmuch
$ sudo yum install offlineimap xapian-core-devel \
  gmime-devel libtalloc-devel gcc gcc-c++
$ ./configure --prefix /usr/local &amp;&amp; make &amp;&amp; sudo make install
</pre>

<p>
Define various keybindings.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package notmuch
  :init
  (progn
    (setq
      gnus-inhibit-images t
      notmuch-archive-tags '("-inbox" "-unread" "+archive")
      notmuch-crypto-process-mime t
      notmuch-fcc-dirs sf/notmuch-fcc-dirs
      notmuch-hello-thousands-separator ","
      notmuch-search-oldest-first nil
      notmuch-show-part-button-default-action 'notmuch-show-view-part
      notmuch-saved-searches '(
                                ("inbox" . "tag:inbox")
                                ("announce" . "tag:announce and not tag:archive and tag:unread")
                                ("reports" . "tag:reports")
                                ("lists" . "tag:lists and not tag:archive")
                                ("ansible" . "tag:ansible")
                                ("github" . "tag:github")
                                ("ganeti" . "tag:ganeti")
                                ("noc" . "tag:noc")
                                )
      )
    (when (not (string= system-name sf/work-workstation))
      (setq notmuch-command "~/bin/notmuch-remote.sh"))
    (add-to-list 'auto-mode-alist '("notmuch-raw-id" . markdown-mode))
    (define-key notmuch-show-mode-map (kbd "d")
      (lambda ()
        "mark message for trash"
        (interactive)
        (notmuch-show-add-tag '("+trash" "-inbox" "-unread"))
        (unless (notmuch-show-next-open-message)
          (notmuch-show-next-thread t))))
    (define-key notmuch-search-mode-map (kbd "d")
      (lambda ()
        "mark message for trash"
        (interactive)
        (notmuch-search-tag (list "+trash" "-inbox" "-unread"))
        (notmuch-search-next-thread )))
    (define-key notmuch-show-mode-map (kbd "j")
      (lambda ()
        "mark message as junk"
        (interactive)
        (notmuch-show-add-tag (list "+spam" "-inbox" "-unread"))
        (unless (notmuch-show-next-open-message)
          (notmuch-show-next-thread t))))
    (define-key notmuch-show-mode-map (kbd "F")
      (lambda ()
        "star message"
        (interactive)
        (notmuch-show-add-tag (list "+flagged"))))
    (define-key notmuch-search-mode-map (kbd "F")
      (lambda ()
        "star thread"
        (interactive)
        (notmuch-search-tag (list "+flagged"))))
    (define-key notmuch-show-mode-map   (kbd "TAB") 'notmuch-show-toggle-message)
    (define-key notmuch-search-mode-map (kbd "g") 'notmuch-refresh-this-buffer)
    (define-key notmuch-hello-mode-map  (kbd "g") 'notmuch-refresh-this-buffer)
    (add-hook 'notmuch-hello-mode-hook 'sf/nolinum)
    (add-hook 'notmuch-show-hook '(lambda () (setq show-trailing-whitespace nil)))
    (dolist (mode '(notmuch-search notmuch-show notmuch-help))
      (evil-set-initial-state mode 'emacs))
    )
  )
</pre>
</div>

<p>
Last, but not least, enable linking to messages from org-mode.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package org-notmuch
  :load-path "package/org-mode/contrib/lisp")
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-7" class="outline-4">
<h4 id="sec-1-8-7"><span class="section-number-4">1.8.7</span> mu4e</h4>
<div class="outline-text-4" id="text-1-8-7">
<p>
<a href="http://www.djcbsoftware.nl/code/mu/mu4e.html">mu4e</a> is a emacs-frontend to <a href="http://www.djcbsoftware.nl/code/mu/">mu</a>, a tool for managing email in <a href="http://cr.yp.to/proto/maildir.html">Maildir</a>
format.  Similar to notmuch, it requires other tools to pull down (eg
offlineimap) and send (eg. smtpmail) your email.  It has an online
<a href="http://www.djcbsoftware.nl/code/mu/mu4e/">manual</a>.
</p>

<p>
The first thing to do is build the index:
</p>

<blockquote>
<p>
$ mu index &#x2013;maildir ~/Maildir
</p>
</blockquote>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun my-mu4e-set-account ()
  "Set the account for composing a message."
  (let* ((account
           (if mu4e-compose-parent-message
             (let ((maildir (mu4e-message-field mu4e-compose-parent-message :maildir)))
               (string-match "/\\(.*?\\)/" maildir)
               (match-string 1 maildir))
             (completing-read (format "Compose with account: (%s) "
                                (mapconcat #'(lambda (var) (car var))
                                  sf/mu4e-account-alist "/"))
               (mapcar #'(lambda (var) (car var)) sf/mu4e-account-alist)
               nil t nil nil (car sf/mu4e-account-alist))))
          (account-vars (cdr (assoc account sf/mu4e-account-alist))))
    (if account-vars
      (mapc #'(lambda (var)
                (set (car var) (cadr var)))
        account-vars)
      (error "No email account found"))))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package mu4e
  :disabled t
  :config
  (progn
    (require 'mu4e-contrib)
    (setq
      mu4e-attachment-dir "~/Downloads"
      mu4e-html2text-command 'mu4e-shr2text
      mu4e-use-fancy-chars t
      mu4e-get-mail-command "true"
      mu4e-bookmarks
       '(("flag:unread AND NOT flag:trashed" "Unread messages" ?u)
         ("date:today..now" "Today's messages" ?t)
         ("date:7d..now" "Last 7 days" ?w)
         ("mime:text/calendar" "Meeting invites" ?c)
         ("mime:image/*" "Messages with images" ?p)
         ("from:cisco.com OR to:cisco.com" "Cisco" ?i)
         ("from:level3.com OR to:level3.com" "Level3" ?l )
         ("from:comcast.com OR to:comcast.com" "Comcast" ?C)
         ("from:centurylink.com OR to:centurylink.com" "Centurylink" ?L)
         ("from:ftr.com OR to:ftr.com" "Frontier" ?F)
         ("from:Internet2" "Internet2" ?I)
         ("from:lsnetworks.net OR to:lsnetworks.net" "LSN" ?Z))
      mu4e-compose-signature-auto-include nil
      mu4e-view-scroll-to-next nil     ;; do not advance to next message when scolling
      mu4e-sent-folder   "/.Sent"       ;; folder for sent messages
      mu4e-drafts-folder "/.Drafts"     ;; unfinished messages
      mu4e-trash-folder  "/.Trash"      ;; trashed messages
      mu4e-refile-folder "/.Archives")  ;; saved messages
    (when (not (string= system-name sf/work-workstation))
      (setq
        mu4e-get-mail-command "offlineimap"
        mu4e-maildir       "~/Maildir"   ;; top-level Maildir
        mu4e-sent-folder   "/Work/Sent"       ;; folder for sent messages
        mu4e-drafts-folder "/Work/Drafts"     ;; unfinished messages
        mu4e-trash-folder  "/Work/Trash"      ;; trashed messages
        mu4e-refile-folder "/Work/Archives")   ;; saved messages
      (add-hook 'mu4e-compose-pre-hook 'my-mu4e-set-account))
    )
  )
</pre>
</div>
</div>
</div>



<div id="outline-container-sec-1-8-8" class="outline-4">
<h4 id="sec-1-8-8"><span class="section-number-4">1.8.8</span> vm</h4>
<div class="outline-text-4" id="text-1-8-8">
<p>
<a href="http://www.emacswiki.org/emacs/CategoryViewMail">ViewMail</a>, aka VM, is a mail package for Emacs.  Development is hosted on
<a href="https://launchpad.net/vm">Launchpad</a>.  There is also a <a href="http://news.gmane.org/gmane.emacs.viewmail">discussion list</a>.  The Emacs Wiki has some
useful pointers.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package vm
  :disabled t
  :config
  (progn
    (require 'vcard)
    (setq
      vm-imap-account-alist sf/vm-imap-alist
      vm-imap-folder-cache-directory "~/.local/share/imap-cache/"
      vm-visible-headers '("From:"
                            "To:"
                            "Apparently-To:"
                            "Cc:"
                            "Subject:"
                            "Date:"
                            "^Replay-To:"
                            "Resent-From:"
                            "Resent-To:")
      vm-primary-inbox sf/primary
      vm-circular-folders nil
      vm-confirm-new-folders t
      vm-mutable-windows nil
      vm-forwarding-subject-format "Fwd: %s"
      vm-digest-send-type "mime"
      vm-forwarding-digest-type "mime"
      vm-move-after-deleting t
      vm-move-after-undeleting nil
      vm-delete-after-saving t
      vm-delete-after-archiving t
      vm-delete-after-bursting t
      vm-enable-addons '(check-recipients check-for-empty-subject encode-headers)
      vm-highlighted-header-regexp "From:\\|To:\\|C[Cc]:\\|Subject:"
      ; deal with mime and html
      vm-mail-prompt-if-subject-empty t
      vm-assimilate-html-command "striptags"
      vm-mime-default-face-charsets t ; just show all and let emacs deal with it
      vm-mime-default-face-charset-exceptions '()
      vm-mime-internal-content-types t
      vm-mime-external-content-types-alist '(
                                              ("application/pdf" "evince")
                                              ("application/rtf" "libreoffice")
                                              ("application/msword" "libreoffice")
                                              ("application/vnd.oasis.opendocument.text" "libreoffice")
                                              ("application/vnd.oasis.opendocument.text-template" "libreoffice")
                                              ("application/vnd.oasis.opendocument.spreadsheet" "libreoffice")
                                              ("application/vnd.oasis.opendocument.presentation" "libreoffice")
                                              )
      vm-mime-text/html-handler 'auto-select
      ; vm-mime-text/html-handler 'shr ; maybe one day
      vm-mime-text/html-blocker "&lt;img[^&gt;]*\\s-src=."
      vm-mime-attachment-source-directory (expand-file-name "~/")
      ; control window and frame behavior
      vm-mutable-windows t
      vm-mutable-frames nil
      vm-frame-per-completion nil
      vm-frame-per-composition t
      vm-frame-per-edit nil
      vm-frame-per-folder nil
      vm-frame-per-summary nil
      vm-summary-format "%n%a%* %y-%-3.3m %2d %H %-20.20F %4l %I%s\n"
      vm-mime-attachment-save-directory "~/Downloads"
      vm-included-text-attribution-format "On %w, %y-%m-%d at %h (%z), %F wrote:"
      vm-reply-subject-prefix "Re: "
      )
    (define-key vm-mode-map "r" 'vm-reply-include-text)
    (define-key vm-mode-map "R" 'vm-followup-include-text)
    (define-key vm-mode-map "f" 'vm-forward-message)
    (define-key vm-mode-map "c" 'vm-visit-imap-folder)
    (define-key vm-mode-map "k" nil)
    (define-key vm-mode-map "K" 'vm-kill-subject)
    (dolist (mode '(vm-summary-mode vm-presentation-mode))
      (evil-set-initial-state mode 'emacs))
    (add-hook 'vm-presentation-mode-hook
      (lambda ()
        (visual-line-mode 1)
        (setq word-wrap 1)
        (setq line-move-visual t)))
    ))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-9" class="outline-4">
<h4 id="sec-1-8-9"><span class="section-number-4">1.8.9</span> gnus</h4>
<div class="outline-text-4" id="text-1-8-9">
<p>
<a href="http://www.gnus.org/manual/gnus_toc.html">Gnus</a> is a built-in message reader for Emacs.  It supports reading and
composing both mail and news.  The <a href="http://www.gnus.org/manual/gnus_toc.html">manual</a> is available online.  There
are lots and lots of posts online about configuring <b>Gnus</b>.  Much of
this is influenced by:
</p>

<ul class="org-ul">
<li><a href="http://www.cataclysmicmutation.com/2010/11/multiple-gmail-accounts-in-gnus/">Multiple GMail Accounts in Gnus</a>
</li>
<li><a href="http://blog.binchen.org/posts/notes-on-using-gnus.html">Practical guide to use Gnus with Gmail</a>
</li>
<li><a href="https://github.com/pierre-lecocq/qsdfgh.com/blob/master/articles/gnus-configuration-example.org">https://github.com/pierre-lecocq/qsdfgh.com/blob/master/articles/gnus-configuration-example.org</a>
</li>
</ul>

<p>
A note regarding terminology:  Gnus uses the term <i>archiving</i> to
describe the method for storing mail you send. 
</p>

<p>
This enables searching of IMAP based accounts.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'nnir)
</pre>
</div>

<p>
Highlights on miscellaneous points from the manual:
</p>

<ul class="org-ul">
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/gnus/Archived-Messages.html">Archived messages</a> (aka the Sent mail folder)
</li>
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/gnus/Expiring-Mail.html#Expiring-Mail">Expiring mail</a>
</li>
</ul>

<p>
Accounts and other sources of reading material.  The first sets the
default method for fetching articles.  This also sets <i>secondary</i>
methods, which happens to be IMAP.
</p>

<p>
Generally speaking, it is hard for me to get past treating email as
news.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package gnus
  :disabled t
  :commands gnus
  :init
  (progn
    (require 'nnir)
    (setq gnus-select-method '(nntp "news.gmane.org"))
    ;; http://www.gnus.org/manual/gnus_397.html
    (add-to-list 'gnus-secondary-select-methods
      '(nnimap "work"
         (nnimap-address sf/nnimap-address)
         (nnimap-server-port 993)
         (nnimap-stream tls)
         (nnimap-authinfo-file "~/.authinfo.gpg")
         (nnir-search-engine imap)
         )
      )
    (setq gnus-agent t
      gnus-gcc-mark-as-read t
      gnus-message-archive-group "Sent"
      gnus-sum-thread-tree-indent          " "
      gnus-sum-thread-tree-single-indent   " "
      gnus-sum-thread-tree-root            " "
      gnus-sum-thread-tree-false-root      ""
      gnus-sum-thread-tree-vertical        ""
      gnus-sum-thread-tree-leaf-with-other " "
      gnus-sum-thread-tree-single-leaf     " "
      gnus-single-article-buffer nil
      gnus-summary-display-arrow t
      gnus-summary-thread-gathering-function 'gnus-gather-threads-by-subject
      gnus-thread-ignore-subject t
      ; http://www.gnus.org/manual/big-gnus.html#Summary-Buffer-Lines
      gnus-user-date-format-alist '(
                                     ((gnus-seconds-today) . "Today, %H:%M")
                                     ((+ 86400 (gnus-seconds-today)) . "Yesterday, %H:%M")
                                     (604800 . "%A %H:%M") ;;that's one week
                                     ((gnus-seconds-month) . "%A %d")
                                     ((gnus-seconds-year) . "%B %d")
                                     (t . "%B %d '%y"))
      gnus-summary-line-format "%U%R%z %(%&amp;user-date;  %-15,15f  %B%s%)\n"

      gnus-parameters '(
                         ("work"
                           ; @see http://www.gnu.org/software/emacs/manual/html_node/gnus/Expiring-Mail.html
                           ;; press 'E' to expire email
;                           (expiry-wait 90)
;                           (expiry-target "nnimap+work:Trash")
                           (posting-style
                             (gcc "nnimap+work:Sent")
                             (address sf/email-work))
                           (expiry-wait . never)
                           (display . all))
                         )
      )
    ; http://www.gnus.org/manual/big-gnus.html#Group-Topics
    (add-hook 'gnus-group-mode-hook 'gnus-topic-mode)
    )
  )
</pre>
</div>
</div>

<div id="outline-container-sec-1-8-9-1" class="outline-5">
<h5 id="sec-1-8-9-1"><span class="section-number-5">1.8.9.1</span> Group buffer</h5>
<div class="outline-text-5" id="text-1-8-9-1">
<p>
Gnus starts in the <a href="http://www.gnus.org/manual/gnus_15.html#SEC15">group buffer</a>.  This lists subscribed groups.  For an
email account, this would be email folders.  Type <b>L</b> to see all groups,
including those with no unread articles.  Type <b>l</b> to see only
subscribed groups with unread articles.  Type <b>g</b> to refresh the
subscribed groups.
</p>
</div>
</div>

<div id="outline-container-sec-1-8-9-2" class="outline-5">
<h5 id="sec-1-8-9-2"><span class="section-number-5">1.8.9.2</span> Server buffer</h5>
<div class="outline-text-5" id="text-1-8-9-2">
<p>
The Gnus <a href="http://www.gnus.org/manual/gnus_159.html#SEC159">server buffer</a> can be entered via <b>^</b>
(<b>gnus-group-enter-server-mode</b>).  Gnus uses backends (eg nnimap) to
connect to real servers.  The server buffer is a way to view the
backends in use.
</p>
</div>
</div>

<div id="outline-container-sec-1-8-9-3" class="outline-5">
<h5 id="sec-1-8-9-3"><span class="section-number-5">1.8.9.3</span> Summary buffer</h5>
<div class="outline-text-5" id="text-1-8-9-3">
<p>
The Gnus <a href="http://www.gnus.org/manual/gnus_59.html#SEC59">summary buffer</a> will show the messages for a given group.  Think
of it as emails in a folder.  Type <b>SPACE</b> to view the currently
selected article.  Type <b>=</b> (<b>gnus-summary-expand-window</b>) to close the
article view and only display the summary.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-9" class="outline-3">
<h3 id="sec-1-9"><span class="section-number-3">1.9</span> Le Fin</h3>
<div class="outline-text-3" id="text-1-9">
<p>
The end.  Send a message so that the user knows it has been completely
loaded.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(message "%s" "Finished loading config")
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Stephen Fromm</p>
<p class="date">Created: 2015-03-12 Thu 21:54</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.4.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
